# To simplify this config "override" would be "$@"
$@ = override

# --- Global & Essential Rules ---
windowrule {
    name = global-suppress-maximize
    match:class = .*
    suppress_event = maximize
}

# --- Terminal & Editors ---
windowrule {
    name = kitty-opacity
    match:class = ^(kitty)
    opacity = 0.95 $@ 0.95 $@ 0.95
}

# --- System Tools (Floating) ---
windowrule {
    name = loupe-viewer
    match:class = ^(org.gnome.Loupe)
    float = on
}

windowrule {
    name = wallpaper-manager
    match:class = ^(waypaper)
    float = on
}

windowrule {
    name = kvantum-theme-manager
    match:class = ^(kvantummanager)
    float = on
}

windowrule {
    name = qt-config-v5
    match:class = ^(qt5ct)
    float = on
}

windowrule {
    name = qt-config-v6
    match:class = ^(qt6ct)
    float = on
}

windowrule {
    name = nwg-appearance-look
    match:class = ^(nwg-look)
    float = on
}

windowrule {
    name = mission-center-monitor
    match:class = ^(io.missioncenter.MissionCenter)
    float = on
    size = 1200 800
}

windowrule {
    name = btop-system-monitor
    match:title = ^(btop)
    size = 1200 800
}

windowrule {
    name = audio-control-pavu
    match:class = ^(org.pulseaudio.pavucontrol)
    float = on
    size = 800 600
    # move = (cursor_x+((monitor_w*1))) (cursor_y+((monitor_h*0)))
}

windowrule {
    name = gnome-calculator
    match:class = ^(org.gnome.Calculator)
    float = on
}

windowrule {
    name = ksnip-screenshot
    match:class = ^(org.ksnip.ksnip)
    float = on
}

# --- Browser & Video Rules ---
windowrule {
    name = firefox-pip
    match:class = ^(firefox)
    match:title = ^(Picture-in-Picture)
    float = on
}

windowrule {
    name = librewolf-pip
    match:class = ^(LibreWolf)
    match:title = ^(Picture-in-Picture)
    float = on
}

windowrule {
    name = generic-pip
    match:title = ^(Picture in picture)
    float = on
}

# --- Dialogs & System UI ---
windowrule {
    name = steam-friends-list
    match:initial_title = ^(Friends List)
    float = on
}

windowrule {
    name = steam-settings
    match:initial_title = ^(Steam Settings)
    float = on
}

windowrule {
    name = file-picker-initial
    match:initial_title = ^(Open File)
    float = on
}

windowrule {
    name = generic-file-dialogs
    match:title = ^(Choose Files|Save As|Save Image|Save File)
    float = on
}

windowrule {
    name = file-operation-alerts
    match:title = ^(Confirm to replace files|File Operation Progress)
    float = on
}

windowrule {
    name = xdg-desktop-portal-ui
    match:class = ^(xdg-desktop-portal-gtk)
    float = on
}

# --- Layer Rules ---
layerrule {
    name = rofi-blur-effect
    match:namespace = rofi
    blur = on
    ignore_alpha = 0
}

# ==============================================================================
# DISABLED / PREVIOUS RULES (CONVERTED TO V3)
# ==============================================================================

# windowrule {
#   name = firefox-full-opacity
#   match:class = ^(firefox)
#   opacity = 1 $@ 1 $@ 1
# }

# windowrule {
#   name = librewolf-full-opacity
#   match:class = ^(LibreWolf)
#   opacity = 1 $@ 1 $@ 1
# }

# windowrule {
#   name = brave-full-opacity
#   match:class = ^(Brave-browser)
#   opacity = 1 $@ 1 $@ 1
# }

# windowrule {
#   name = nautilus-opacity
#   match:class = ^(org.gnome.Nautilus)
#   opacity = 0.95 $@ 0.95 $@ 1
# }

# windowrule {
#   name = discord-opacity
#   match:class = ^(discord)
#   opacity = 0.95 $@ 0.95 $@ 1
# }

# windowrule {
#   name = neovide-opacity
#   match:class = ^(neovide)
#   opacity = 0.95 $@ 0.95 $@ 1
# }

# windowrule {
#   name = telegram-floating
#   match:class = ^(org.telegram.desktop)
#   float = on
# }

# windowrule {
#   name = polkit-agent-opacity
#   match:class = ^(polkit-gnome-authentication-agent-1)
#   opacity = 0.90 $@ 0.85 $@ 1
# }
